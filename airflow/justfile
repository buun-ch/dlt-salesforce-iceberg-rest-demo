# Airflow deployment recipes for dlt-salesforce pipeline

set dotenv-filename := ".env.local"

[private]
default:
    @just --list --unsorted --list-submodules

# Prepare Airflow dags directory for Kubernetes deployment
prepare-airflow:
    @echo "ðŸ“¦ Preparing dags directory for Kubernetes deployment..."
    mkdir -p dags/dlt_salesforce
    cp ../salesforce_pipeline.py dags/dlt_salesforce/
    cp -r ../iceberg ../salesforce dags/dlt_salesforce
    touch dags/dlt_salesforce/__init__.py
    @echo "   â†’ salesforce_pipeline.py"
    @echo "   â†’ iceberg/schema.py"
    @echo "âœ… Ready for Kubernetes deployment"
    @echo "   Directory: ./dags/"

# Clean up prepared Airlfow files
clean-airflow:
    @echo "ðŸ§¹ Cleaning up prepared files..."
    rm -rf dags/dlt_salesforce/
    @echo "   â†’ Removed dags/dlt-salesforce/"
