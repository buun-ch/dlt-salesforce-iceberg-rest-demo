# Dagster deployment recipes for dlt-salesforce pipeline

set dotenv-filename := ".env.local"

[private]
default:
    @just --list --unsorted --list-submodules

# Prepare Dagster repository for Kubernetes deployment
prepare:
    @echo "ðŸ“¦ Preparing dagster repository for Kubernetes deployment..."
    mkdir -p ./dlt_salesforce/dependencies
    touch ./dlt_salesforce/dependencies/__init__.py
    cp ../salesforce_pipeline.py ./dlt_salesforce/dependencies
    cp -r ../iceberg ../salesforce ./dlt_salesforce/dependencies
    @echo "âœ… Ready for deployment"

# Clean up prepared Dagster files
clean:
    @echo "ðŸ§¹ Cleaning up prepared files..."
    rm -rf dlt_salesforce/dependencies
    @echo "   â†’ Removed dagster/dlt_salesforce/dependencies/"
